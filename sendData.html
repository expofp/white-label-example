<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>

<form action="" id="form">
    <textarea name="" cols="30" rows="10" id="textarea"></textarea>
    <button type="submit">Send</button>
</form>

<script>
    window.onload = () => {
		const expo = "<%= expo %>";
		const scope = "<%= SCOPE %>";
		const signature = "<%= signature %>";

		const $form = document.getElementById("form");
    	$form.addEventListener("submit", (e) => {
    		e.preventDefault();
			const value = document.getElementById("textarea").value;
            const cleanedJsonString = value.replace(/\n\s+/g, '');

			fetch("http://localhost:3000/api/sendData", {
				method: "POST",
				headers: {
					"Content-Type": "application/json"
				},
                body: JSON.stringify({
                    expo,
                    scope,
                    signature,
                    data: cleanedJsonString
                })
            })
        })
    }
</script>

</body>
</html>
